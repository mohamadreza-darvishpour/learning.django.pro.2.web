#start django...

#install django
pip3 install django

django-admin  # show the main command. it is a CLI = command line interface

django-admin startproject <pro-name> # start a pro at current dir ----startproject is a subcommand for django-admin

<manage.py> is a heart of django pro


'wsgi.py' and 'asgi.py' file uses to deploy files 

the 'settings.py'  is global setting about pro


python manage.py   #run manage.py 
./manage.py  #show subcommands 

#install django at virtual env

localhost=127.0.0.1

./manage.py startapp <app_name>#make an app named app_name by subcommand startapp at django file at current dir

add <started_app_name> to INSTALLED_APP at settings of main file.

form django.urls import path
from django.http import HttpResponse
from django.urls import include # to include an url in an app to urls in the main urls.py 

placeholder: #make variable at jango by <>  .e.g  '<variables>' in the string yet use in path. and return it to function.

from django.http import HttpResponseNotFound

#command at placeholder
path("<int:variable>",...) or path("<str:variable>",...) #order by the way that <str:vari>
if it is possible to change <variable> type to int or str or anyother order it changes to.


302....#status code 300,302,... are especially used as redirections events.

from http import HttpResponseRedirect
HttpResponseRedirect("newurl")#it resend the page to "newurl"

#use reverse
from django.urls import reverse  #it get a name and reverse or make a url by that.
but you should use the name at urls.py at urlpatterns at path    .e.g
path('path_url<var1><var2>..',views...., name="path_name") #it take a name to path and has been used in place of 'path_url'
#how to use reverse???
from django.urls import reverse 
path_vari = reverse('name of the path .e.g path_name',args=[var1,var2])
#path name was an entered name at urls.py at path and their variables(args) at path must be in the list 
and then we have a full url of made application at path_vari
#then we can use it by:'{path_vari}' at string.









#to use html tags at views....
our_reply = f'<html-tag> messages...</html-tag>'  #it run html tag at browser.
and send our_reply by HttpResponse(our_reply)


#work with templates   *********
make a file named 'templates' and make another at that named our application name so ...
our-app/templates/our-app/
then make html-file at that path.



#use templates
first make a dir at app_name_folder
app_name_folder/templates/app_name_folder
then we make html template at that folder: app_name_folder/templates/app_name_folder
after that go to views and --> 
from django.template.loader import render_to_string  #it changes html templates or file at app_name_folder to string at the path gien.
our_html_string = render_to_string( 'app_name_folder/html1.html') #render html1.html to string 
then
return HttpResponse(our_html_string)  #clearly done after good pathing at urls.py.
or.....
from django.shourtcuts  import render   
return render(request,'app_name_folder/html1.html')  #it directly make it string at return it 

  

we can use complete address at settings.py at TEMPLATES at 'dir':"our_path" and we don't sign our app 
to INSTALLED_APP   


if you made a variable at urls.py you must sign it at the views.py

DTL = django templates language      #merge django syntax and html syntax
#use dtl to update files
at views.py you need render
we can send informations by the dictionary at views by render.
dict={'key1':'data1',...} s
we can send it by render
render(request,'html-file-path.html',context)
render(request,'html-file-path.html',dict) it send informations at dictionary type just in dictionary and the keys is usable at htmlfile
then go to htmlfile and read the data at dict by {{key1}} and it sends the 'data1' at html file
<span>{{key1}} </span>   
#***notice: we use the key to send the values.



#django template filter     search and found different built in filter
built in filter has been used by ' | ' after html dtl
.e.g     
<span>   it is the time{{ time | add 3}}   </span>
just showing variable has been changed not a main vari.

you can form your built in filter function.


#template tags
uses in template html files
{% python command .. %}   #is used to command python in htmlfiles
..html commands.....
{% end python command %}



#search about different template tags  .e.g   url template tag
{% url "url's name"    variable_value1 va...2  v..3 ...%}  #we can use url command to make link between urls 
or 
{% url "url's name"    variable1=value1 va.2=...2  v..3=..3 ...%}  send values to variables needed.  
***it makes complete url not a complete link and you haven't to close this tag.

#{% if condition1 %}
    do 1
 {%elif condition2%}
    do 2
 {%else %}
    do3
 {%endif%}
'if' tag to set conditional matter.


#use inheritance at html files to make code shorter.
make a folder named'templates' at main djagnofile
then make a file named 'base.html' or other name...
write base html code.
then use {% block block_name %} default data{% endblock block_name %} at 'base.html'file
#how to use it in other html file
{% extends '../../../or_path_of_base.html' %} or {% extends 'name_of_base.html' %} ###
***but if you want to use the direct name of 'name_of_base.html' you should add the 
newtemplats folder PATH in the settings at templates part
*it reuse the base.html file.



#how do i use the  include tag 
make a folder named includes at one of templates folder
then make a html file you want to reuse at another htmlfiles
go where you want to use the 'includes'file contains and write an include tag in this way:
{% include 'written_file_at_includesfile_PATH.html' %} # it run the lines you write at that file.
we can use special part of htmlfile at include tag but yet i don't learn it ..
***if we don't use render to send dictionary of informations we can't use dtl type of variables 
at the include tag.
#use given data at main page and sign it at html includes file
sign the vari at include tag .e.g but use it at includes_file.htmls
###use it ...
{% include 'includes/file.html' with vari_sign_here_use_in_main_html="7days at cheers.html" %}
use the variable by {{vari_at_mainhtml_sign_at_includes_file}}


#make 404  not found page
make 404.html file in the templates folder using extends and block tags of base.html
in views.py use 
from django.template.loader import render_to_string   #to change html file to pure string
from django.http import HttpResponseNotFound    #to send a html page
vari1 = render_to_string('path/404.html')   #change 404.htlm to string
return HttpResponseNotFound(vari1)           #return vari1 to page 
#or you can go another way
from django.http import Http404
raise Http404()                  #automatically send 404.html file at templates or  automatic not found error page
notice*******:use ''''raise''''' not return _and you can make 404.html or not to used by http404()


###########**django is MVT STRUCTURED means model.view.template



#static files 
first make 2 folders into eachother at your 'app_path'
make  'app_path/static/app_path_name/appname.css'      #.e.g: we have a example static file like appname.css at the path of static files 
then control 2 parameters at main settings.py 
one: at INSTALLED_APPs part the 'django.contrib.statics' has been should to be     #make sure statics part of django run
two; at  STATIC_URL= '/static/'  has been should to be as a static file path.       #make sure path of static file signed at the settings.py
* good move 
so now to use static files like css files we should write a special tag above the file 
we want to use the statuc files in it  the tag is :::
{% load static %}                                               #to remind we want to use static files.
then to use the css file we need to make a html tag that is ::
<link rel="stylesheet"  href = "{% static 'appname_path/appname.css'%}"   #notice: use a static tag to sign it and for all static file at html we need <link> tag.
then we write changes at appname.css file and it must run.
.........it's done rightly..............



#use static files at main part of django
make 'static' folder at main part of app beside manage.py and db.sqlite3
make css file .e.g  style.css
and do changes in it .e.g  add new font of google
you need to add new thing in your main 'settings.py':::
STATICFILES_DIRS = [
BASE_DIR / "main_static_path_name" ,
]                                                #it cause to find the main static files at "main_static_path_name" files
then make a <link rel=? href=?> tag at the file you want to do changes of static files in it 
####



#slug type:   #inclusion to int and str.
#path('sldkf<slug:slug',views/ldkf)

 
notice:*****extends tag must be the first tag at html pages....


"چرا میتونم از پوشه ی استاتیک داخل  اپ خودم عکس بیارم اما از استاتیک اصلی نمیشه؟؟؟؟؟؟؟؟؟"
چرا نمیتوانم از استاتیک اصلی استفاده کنم؟







#static images at pro
put images at  appfolder/static/appfolder_name/images/
and then read them by static tag.   ####imgs that uploaded is defferent.




notice***:we can send arguments without signing by name in order .e.g:
{%url 'nameofpath'  arg1='sldkfj' arg2='sldkf'%} or  {%url 'nameofpath' 'valu1' 'value2' %}




#send data as a dict by render
when we send the data to a html file we can use dependencies of that part of file to the 
dict sended. 
notice:#####to read informtions from file dont use '' dict={'d':'s'} you should write{{dict.d}},



when we use STATIC TANG  #######3
{{static 'path'|add:item.entry}} #it adds 'item.entry'obj at the end of 'path' str to make it dynamic.





******python good function****
            next()
current_vari= next( vari for vari in list_or...  if vari==condition or...)  #found first item make conditions satisfied.
******


linebreaks********** 
{{item.content|linebreaks}}  #line breaks enable our enterline in paragraph at html1.html




#databases*****************
data
1,temperary data
2,semipersistant data
3,persistant data     
3 saved in databases 



types of databases:
1,sql    2,nosql


connect database by django in models.py:
from django.models import models
class  class_name(models.Model):  
#inorder to inherit at models.Model 
#you should write models.model in the argumant to connect 
                 ###and class_name is name of the table at database
   

*google django models fields

at any class at models.py you should use the database by modules of models 
.e.g:
title = models.CharField(max_length= 300)
price = models.IntegerField()
#we called above class "model"
**inorder to use database you should mention "app_name" in "installed apps" in settings.py


***   ORM  ****
connections of programming and database features.

?
?
create,read,update,delete ==== its famous to CRUD


./manage.py  shell    ###use python shell in django
***commanding at django shell***
from <appname>.models  import <model_class_name_in_models.py>

#create items via shell in database
item_name = imported_models_class(arg1=valu1 ,arg2=val2,...)
item_name.save()      #it saves it to database.

model_class_name.objects.all() #see evidance of adding item at database via shell

#show entries items by shell 
model_class_name.objects.all()[item_number].item_name
e.g.:
products.objects.all()[1].price   #return "price" item in the"products"class in the 2th item.entry

#add __str__ module to model.class
def __str__(self):
   return f'{self.item1}_{self.item2}-....'

###google django models validator.

#**   validator in django  **#
#first import them
from django.core.validators  import MinValueValidator,Max.Value.Validator
*then use them
#add null,default 
# null ===we can put nothing in it ,   default = val1  ====put val1 in all doesn't have value
class model_class_in_models.py(models.Model):
   item_1_in_db = models.CharField(max_length = 300,null=True)
   item_2_in_db = models.BooleanField(default = False)

   item_3_in_db = models.IntegerField(
      validators =[
      MinValueValidator = 3,
      MaxValueValidator = 234, 
      ]
   )
   ####Its the way we use validators.

   
#make new changes in items of database
from app_name.models import model_class_name.objects.all    #import db class from models.py
vari1 = model_class_name.objects.all()[2]       #select the entire table of db
vari1.item = new_value     #make changes to item
vari1.save()               #to save changes in db

#delete entry in db
from app_name.models import model_class_name.objects.all    #import db class from models.py
vari2 = model_class_name.objects.all()[2]       #make instance or select the entire table of db
vari2.delete   #delete an entry



#add entry to db _another way without instance
#    create    *
model_class_name.objects.create(item1=val1,arg2=val2,...)

#read data without objects.all()[1]...
#read by 'get()'
models_class_name.get(item=value) 
#*it returns just '''one''' entry with the same value at item
#notice: if data not found or exist more than 1 with same value of item it makes error...



#filter given data
model_class_name.objects.filter( feature1=value1 , feature2= value2 ) 
#return all of the entries contained values of features.
###notice: I can't use '<  <=  >=  >' in the filter but has been made another way to do that.


#***use field lookups ***#
models.class_name.objects.filter(
   feature1__lt=3,        ###__lt=lower than = feature1<3
   feature2__lte=5,        ###__lt=lower than equal = feature2<=5
   feature3__gt=7,        ###__lt=greater than = feature3>7
   feature4__gte=9,        ###__lt=lowerthan equal= feature4>=9
   feature5__contains='text5'    ##text5 exists in that.key sensitive
   feature6__icontains='text6'    ##text6 exists in that.not key sensitive
   )
it uses 'and' between features.inorder to use 'or' we do another way.

###google django filter  +  feild lookups


###how to use 'or' among features of filter??
from django.db.models import Q    #import Q as query.
then: #use Q and '|'
models.class_name.objects.filter(
   Q(feature1__lt=3) |  Q(feature2__lte=5) | Q(feature3__gt=7) | Q(feature4__gte=9) |  Q(feature5__contains='text5') | Q(feature6__icontains='text6') ) 
#Q uses 'or' between differenet features not 'and'
# we can use 'or=|'and 'and=,' together in the filter also.
#notice: last feature can come without 'Q' but it has to use and=','




#make base.html at main templates but other html file in templates/app_name/other.html
notice: control ('DIRS:[BASE_DIR /'templates']) has been gotten in template part at main settings.py.

write below in urls.py
from django.urls import path
from . import views

in main urls.py write and import lines below: #to add all path to main app.
from django.urls import include,path
urlpatterns = [
    path('admin/', admin.site.urls),
    path('anypath/',include('app_name.urls')),
]



####***    use database in views.py   ***####
in views.py we should write:
from .models import models_class_name

#get data from db or raise 404
from django.shortcuts import get_object_or_404  #import to use
prods=get_object_or_404(model_class_name,feature=value)    #get data or send 404




































